{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}

{% block main %}
    <div id="login_div">
        <div id="login_div_image">
        </div>
        <div id="login_div_form">
            <h2 class="login-title">Bienvenue chez AtypikHouse</h2>
            {% if error %}
                <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}
            {{ form_start(login_form, { 'attr': {'class': 'authentication_form', 'id': 'login_form'}, 'action': path('login')}) }}
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                {{ form_widget(login_form.email, { 'attr': {'placeholder': 'Email'}, 'value': last_username}) }}
                {{ form_widget(login_form.password, { 'attr': {'placeholder': 'Mot de passe'} }) }}
            {{ form_end(login_form, {render_rest: false}) }}
            {{ form_start(register_form, { 'attr': {'class': 'authentication_form', 'id': 'register_form', 'action': path('register')} }) }}
                {{ form_row(register_form._token) }}
                {{ form_widget(register_form.nom, { 'attr': {'placeholder': 'Nom'} }) }}
                {{ form_widget(register_form.prenom, { 'attr': {'placeholder': 'Prénom'} }) }}
                {{ form_widget(register_form.email, { 'attr': {'placeholder': 'Email'} }) }}
                {{ form_widget(register_form.plainPassword, { 'attr': {'placeholder': 'Mot de passe'} }) }}
            {{ form_end(register_form, {render_rest: false}) }}
            <button id="form_submit_btn" type="submit" form="login_form" class="btn btn-outline-success submit-btn">Connexion</button>
            <div id="login_btn_div">
                <button id="login_form_btn" type="button" >Se connecter</button>
                <button id="register_form_btn" type="button" >S'inscrire</button>
                <a id="forgot_password_btn" href="{{path('app_forgot_password_request')}}">Mot de passe oublié</a>
            </div>
        </div>
    </div>
{% endblock %}
